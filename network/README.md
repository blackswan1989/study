# 1. 컴퓨터 네트워크 (TCP/IP)

## 01. 컴퓨터 네트워크의 종류

### 1) Network

컴퓨터 네트워크는 여러 대의 컴퓨터를 서로 연결하여 서로 데이터를 주고받을 수 있도록 망이 사전에 구축된 것을 말한다.  
연결되는 컴퓨터가 많아질수록 네트워크의 규모는 커지고, 커진 만큼 더 다양한 정보를 교환하거나 통신 방식을 사용할수 있게 된다.

> #### 1)-1 Internet <br>
>
> 여러 네트워크 중에서도 가장 규모가 큰 네트워크가 바로 '인터넷'이다. <br> 이 인터넷은 다양한 기술이 조합되고 수많은 단체의 도움으로 유지되는 세계에서 가장 크고 유일무이한 범용 네트워크이다.

> #### 1)-2 Mobile Network <br>
>
> 그 외에 휴대전화나 스마트폰을 연결하기 위해 무선 기술을 활용한 것을 <br>'무선 네트워크' 또는 '모바일 네트워크'라고 부른다. <br>오늘날에는 무선으로 접속하는 장비가 많아져 무선 네트워크의 규모도 점점 커지고 있다.

### 2) LAN(Local Area Network)

가정이나 사무실처럼 실내에서 비교적 근거리에 위치한 컴퓨터들이 연결된것을 의미.

### 3) WAN(Wide Area Network)

집 밖이나 회사 건물 밖처럼 비교적 먼 거리에 위치한 컴퓨터들과 연결된 것을 일컬음.

<br>

## 02. Server와 Client

네트워크에서 서로 통신하는 컴퓨터들은 서버가 아니면 클라이언트지만,  
Peer-to-Peer(P2P) 방식으로 통신한다면 각각의 컴퓨터는 서버이면서도 클라이언트가 된다.

### 1) Server와 Client의 정의

네트워크에 연결된 컴퓨터들 중 서비스를 제공하는 쪽을 Server라고 부르고, 그 서비스를 받는 쪽을 Client라고 부른다.  
서버와 클라이언트의 역할은 하드웨어의 성능으로 구분하는 것이 아니라 어떤 역할의 프로그램을 설치하냐에 따라 결정된다.

### 2) Peer-to-Peer(P2P)

네트워크에 연결된 두 대의 컴퓨터가 클라이언트와 서버의 역할을 동시에 할 수 있어서,  
서로에게 서비스를 주거나 받을 수 있는 통신 방식을 말한다.  
주로 개인 컴퓨터 간의 파일 공유나 인터넷 전화(VolP, Voice over IP)등에 활용된다.

<br>

## 03. Packet 교환 방식

컴퓨터 네트워크에서는 이메일이나 파일과 같은 데이터를 패킷(Packet)이라는 작은 단위로 분할 한 후 주고받는다.  
Packet은 자신이 어디로 전달되어야 하는 지 알 수 있도록 Address정보를 가지고 있다.

아날로그 방식의 유선 전화나 3G 방식의 휴대전화는 '회선 교환 방식'을 사용하는데 이는 기본적으로 일대일 통신만 가능하다.

반면 Packet 교환 방식은 주고 받을 데이터를 작게 쪼갠 후 다른 데이터의 조각들과  
통신 경로를 공유하며 전송하는 방식이기 때문에 여러 상대와 통신할 때 효과적이다.  
Packet 교환 방식은 메일 발송과 웹서핑을 동시에 할 수 있다.  
하지만 주고받는 패킷이 많아지면 전송 속도가 느려질 수 있다.

<br>

## 04. 컴퓨터 네트워크와 계층모델

### 1) 컴퓨터 네트워크를 구성하는 계층들

컴퓨터 네트워크에서는 다양한 통신 장비와 프로그램이 어울려 통신을 가능하게하는데,  
이렇게 통신에 참여하는 여러 장비나 프로그램은 각각 맡은 역할이 있다.  
이런 역할들을 이해하기 쉽게 분류하고 추상화한 것을 '계층 모델' 이라고 한다.

> #### 1)-1 애플리케이션 계층 (Application Layer)
>
> - server, client, HTTP, SMPT, POP3, FTP, SSh...
> - 웹서비스, email과 같은 '서비스'를 사용자에게 제공한다.
> - 서비스를 제공하며 서비스 내용을 결정

> #### 1)-2 트랜스포트 계층 (Transport layer)
>
> - TCP, UDP
> - 어플리케이션 계층과 인터넷 계층 사이에서 데이터가 올바르게 전달되도록 중계한다.
> - 데이터를 전달하는 통신 기능 담당

> #### 1)-3 인터넷 계층 (Internet Layer)
>
> - IP Address, IPv4, IPv6, ICMP, 라우팅...
> - 목적지의 IP 어드레스로 데이터를 전달한다.
> - 데이터를 전달하는 통신 기능 담당

> #### 1)-4 네트워크 인터페이스 계층 (Network Interface Layer)
>
> - 이더넷, 무선 LAN, MAC Address, PPP, PTTx, xDSL ...
> - 네트워크 어댑터와 같은 하드웨어를 통해 데이터를 전달한다.
> - 데이터를 전달하는 통신 기능 담당

### 2) 각 계층을 통과하는 데이터의 형태

통신 과정에서 각 계층을 지나는 데이터는 Packet 단위로 작게 쪼개지고 목적지 정보와 같은 부가 정보가 헤더의 형태로 덧붙여지게 된다.

데이터 앞에 덧붙이는 정보를 Header라고 부르고, 뒤에 덧붙이는 정보를 Trailer라고 부른다.  
수신자에게는 송신지의 같은 계층에서 덧붙인 정보를 확인한 후에 해당 계층이 해야 할 일을 처리한다.

<br>

## 05. 각 계층의 동작 방식

### 1) 애플리케이션 계층 (Application Layer)

어플리케이션 계층의 역할은 사용자가 실제로 체감할 수 있는 서비스를 제공하는 것이다.  
예를 들어 웹 브라우저와 웹 서버는 어플리케이션 계층에 속하는 프로그램이고,  
이때 주고 받은 데이터는 페이지를 요청하는 URL과 그 응답 결과로 전달되는 웹 페이지 데이터이다.  
즉, 어플리케이션 계층의 프로그램은 데이터의 내용을 보고 그에 맞는 서비스를 처리하는 데 집중하고  
데이터 전송에 대해서는 하위 계층에 위임한다고 할 수 있다.  
이 하나의 계층만 들여다보면 마치 서로 같은 계층이 직접 통신하는 것처럼 보인다.

> 1. 클라이언트Pc에서 보고싶은 웹 페이지의 URL을 요청한다
> 2. 웹 서버 컴퓨터에서 웹 페이지의 HTML 데이터를 응답한다.
> 3. 클라이언트Pc에서 서버의 응답으로 받은 HTML 데이터를 해석하여 웹페이지 형태로 표시한다

### 2) 트렌스포트 계층 (Transport layer)

트렌스포트 계층의 역할은 애플리케이션 계층의 프로그램에서 전달받은 데이터를  
목적지 애플리케이션 계층의 프로그램까지 전달하는 것이다.  
데이터가 제대로 전달되지 않았을 때 재전송 하는 것도 이 계층이 하는 일이다.

> 1. 어떤 프로그램들이 서로 통신을 해야 하는지에 대한 정보를 header에 기록한다.
> 2. 포트 번호를 확인하고 웹 서버에 데이터를 전달한다.
> 3. 요청을 보낸 프로그램을 목적지로 설정하여 응답 데이터를 전달한다.

### 3) 인터넷 계층 (Internet Layer)

인터넷 계층의 역할은 데이터에 Address 정보를 덧붙여서 목적지까지 무사히 전달하는 것이다.  
인터넷 통신에서는 목적지 컴퓨터까지 도달할 수 있는 경로를 찾아야 하는데, 이때 라우터(router)라는 장비가 사용된다.  
즉 인터넷에서 통신을 할 떄에는 이어달리기를 하는 것처럼 데이터를 다음 네트워크로 전달하기 위해 라우터라는 장비를 사용하는 것이다.

> 1. 통신하는 컴퓨터들을 식벽할 수 있도록 Address 정보를 덧붙인다. (요청)
> 2. 자신이 수신해야 하는 데이터라고 판단되면 서버쪽의 트랜스포트 계층에 데이터를 전달한다.
> 3. 하드웨어는 어드레스 정보를 보고 목적지로 데이터를 전달한다
> 4. 클라이언트 PC를 목적지로 설정하여 데이터를 전달한다. (응답)
> 5. 자신이 수신해야 하는 데이터라고 판단되면 클라이언트PC쪽의 트랜스포트 계층에 데이터를 전달한다.

### 4) 네트워크 인터페이스 계층 (Network Interface Layer)

네트워크 인터페이스 계층의 역할은 유선 LAN 어댑터나 무선 LAN 어댑터가  
처리할 수 있는 형태로 데이터를 변환하고 이 데이터를 목적지까지 전달하는 것이다.  
네트워크 어댑터가 처리할 수 있는 형태로 데이터를 변환하고 인접한 장비나 컴퓨터까지 변환덴 데이터를 전달한다.  
바로 위의 인터넷 계층이 멀리 떨어져 있는 목적지까지 어떻게 데이터를 잘 전달할까에 초점을 맞추고있다면,  
네트워크 인터페이스 계층은 물리적으로 인접하여 연결된 장비까지 어떻게 데이터를 잘 전달할까에 초점을 맞추고있다.

> 1. 주변 장치까지 데이터를 전달하는 데 필요한 정보를 덧붙인다.
> 2. 스위치에서 주변 장치까지 데이터를 전달하는 데 필요한 정보로 변경한다.
> 3. 자신이 수신해야 하는 데이터라고 판단되면 서버쪽의 인터넷 계층에 데이터를 전달한다.
> 4. 주변 장치까지 데이터를 전달하는데 필요한 정보를 덧붙인다.
> 5. 자신이 수신해야 하는 데이터라고 판단되면 클라이언트PC쪽의 인터넷 계층에 데이터를 전달한다.

<br>

## 06. 통신 규약과 프로토콜

### 1) 프로토콜이란?

컴퓨터와 컴퓨터가 통신할 때 지켜야 할 절차나 규약을 프로토콜(Protocol)이라고 한다.
예를 들어 컴퓨터끼리 통신을 하려면 '어떤 절차에 따라 무엇을 보낼 것인가'와 같은 규칙이 필요하다.  
또 '전송이 잘 되지 않았을 때 어떻게 할 것인가'와 같은 대안도 정의되어 있다.

프로토콜은 통신 기능을 구현하고 있거나 통신 장비처럼 물리적인 형태가 있는 것이 아닌,  
통신 과정의 절차나 규칙이 기술된 '사양서'에 불과하다. 하지만 프로토콜에 맞게 동작하도록 만들어진 프로그램이나  
통신장비 그리고 데이터 포맷 등이 존재하고, 이들이 서로 약속된 방식으로 잘 동작할 때 원할한 통신이 가능해진다.

> - Application Layer: HTTP라는 프로토콜에 따라 동작하도록 만들어진 웹 브라우저 & 웹 서버
> - Transport layer: TCP/IP라는 프로토콜에 따라 동작하도록 만들어진 OS 내장 통신 프로그램
> - Network Interface Layer : 이더넷 이라는 프로토콜에 따라 동작하도록 만들어진 네트워크 어댑터용 디바이스 드라이버
> - Hardware : 이더넷 이라는 프로토콜에 따라 동작하도록 만들어진 LAN케이블과 네트워크 허브

### 2) 프로토콜 조합

네트워크 프로토콜들은 소속된 계층에 맞게 그 역할이 전문화되고 세분화되어있다.  
따라서 하나의 통신을 전체적으로 성공시키기 위해서는 이들 각 계층의 프로토콜을 잘 조합하여 사용해야 한다.

> #### 2)-1 웹 페이지의 경우
>
> 1. HTTP (웹페이지를 보기위한 프로토콜)
> 2. TCP (데이터를 확실하게 전달하기 위한 프로토콜)
> 3. IP (일반적인 통신에 사용하는 프로토콜)
> 4. 이더넷 (유선LAN 데이터 전송 규격)
>
> #### 2)-2 인터넷전화의 경우
>
> 1. VolP (전화 애플리케이션을 위한 프로토콜)
> 2. UDP (확실한 데이터 전달은 보장하기 어렵지만, 고속 전송이 가능한 프로토콜)
> 3. IP (일반적인 통신에 사용하는 프로토콜)
> 4. IEEE802.11 (무선 LAN 데이터 전송 규격)

### 3) 대표적인 프로토콜

#### 3)-1 애플리케이션 계층

- HTTP : 웹 페이지 데이터를 주고받음
- HTTPS : 보안을 위해 웹 페이지 데이터를 주고받는 과정을 암호화함
- POP3 : 서버에 보관된 수신 메일을 꺼내옴
- SMTP : 메일을 송신함
- FTP : 파일을 전송함
- Telnet : 컴퓨터를 원격에서 제어함
- SSH : 보안을 위해 컴퓨터를 원격에서 제어하는 과정을 암호화함
- SMB : 윈도우 컴퓨터와 파일을 공유함
- DHCP : 컴퓨터에게 프라이빗 IP를 동적으로 할당함
- DNS : 도메인 이름과 IP 어드레스를 서로 변환함
- SSL : 보안을 위해 통신 과정에서 주고받는 데이터를 암호화함

#### 3)-2 애플리케이션 계층트랜스포트 계층

- TCP : 애플리케이션의 데이터를 송수신하되 데이터의 정확한 전달을 중시함
- UDP : 애플리케이션의 데이터를 송수신하되 데이터의 전송 속도를 중시함

#### 3)-3 인터넷 계층

- IP : 패킷을 목적지까지 전달함
- ICMP : IP의 통신 오류를 전달함
- IPsec : 패킷을 암호화하여 전달함
- ARP : 네트워크 장비의 MAC 어드레스를 알아냄

#### 3)-4 네트워크 인터페이스 계층

- 이더넷 : 일반 금속 케이블이나 광 케이블을 통해 데이터를 전달함

- PPP : 사용자 인증 후에 원격지의 장비와 통신함

#### NOTE | TCP/IP는 프로토콜의 집합

TCP/IP는 하나의 프로토콜을 지칭하는 말이 아니라, 인터넷에서 사용되는 [각종 표준 프로토콜들의 집합]을 일컫는 말이다.  
이를 TCP/IP라고 지칭하는 이유는, TCP와 IP가 이들 프로토콜 중 가장 대표적인 프로토콜이기 때문이다.  
인터넷 프로토콜 집합의 의미로 굳이 구분해야 할 때에는 TCP/IP Protocol Suite라고 부르거나,  
인터넷 프로토콜 스위트(Internet Protocol Suite)라고 부르면 된다.

<br>
<br>

# 2. 네트워크 서비스와 Application Layer

## 01. 웹 페이지를 전송하는 HTTP

웹브라우저가 웹 서버로 특정 웹 페이지를 요청하면 웹 서버가 해당 페이지의 내용을 HTML 형식으로 응답한다.  
이때 표시되는 웹 페이지에는 HTML 형식 외에도 화면 구성에 필요한 각종 파일들의 정보도 함께 포함되어 있다.

- 주요 구성 파일들 : HTML, CSS, Javascript, JPEG(이미지, 동영상 파일)
- HTTP Message : 클라이언트의 PC의 웹 브라우저와 웹 서버는 HTTP라는 애플리케이션 계층의 프로토콜을 사용한다. 통신 과정에서 주고 받은 정보들을 HTTP 메시지라 부르고, 크게 요청(Request)과 응답(Response)의 형태로 구분된다.
- HTTP는 통신 시 정보를 한 번씩 주고받은 후 바로 끊는 형태로 처리되는데 이렇게 상태 정보를 저장하지 않는 통신 형태를 스테이트리스(Stateless)라고 한다.
- HTTP는 대표적인 무상태 프로토콜이다. 따라서 웹 서비스에서는 상태 정보 유지를 위한 별도의 처리가 필요하다.

## 02. 웹 서비스와 웹 애플리케이션

웹 서비스나 웹 애플리케이션은 웹의 동작 방식을 응용하여 사용자와 상호작용하기 위해 만들어진 프로그램이다.  
먼저 웹 페이지는 사용자의 입력을 받기 위해 양식 형태의 입력 필드를 제공한다.  
웹 서버는 사용자의 입력을 받은 후 그 응답 결과를 다시 사용자에게 되돌려 주는데,  
이때 응답 결과를 동적으로 만들어 주는 것이 '웹 서비스'나 '웹 애플리케이션'이라고 한다.  
대표적인 웹 서비스의 예로는 검색 서비스나 온라인 쇼핑몰 등이 있다.

> #### 1) GET 방식
>
> - GET/search?q=TCP%2FIPHTTP/1.1 : 입력 폼의 내용이 요청 행에 포함된다.
> - 결과 : http://search.service.com/search?q=TCP%2FIP : URL의 '?'문자 뒤에 입력 폼의 내용이 붙는다.
> - 이렇게 URL에 입력 폼의 내용이 포함되어있어 '이전 페이지'를 누르면 한 단계 앞의 페이지가 표시되어 정적인 웹 페이지처럼 다룰 수 있다.
>
> #### 2) POST 방식
>
> - POST/sendform.phpHTTP/1.1 : 입력 폼의 내용이 요청 행이 아닌 메세지 body에 포함된다.
> - GET 방식이 정보를 요청하는 것과 달리, POST 방식은 정보를 저장하거나 변경할 때 사용하며 더 많은 데이터를 전송할 수 있다.
> - GET 방식처럼 입력 폼의 내용이 육안으로 쉽게 노출되지 않아 보안상 안전한 편이다.
>
> #### 3) 웹 서비스의 사용성을 높여주는 AJAX
>
> - 최근 웹 서비스는 시스템의 사용성(usability)을 높이기 위해 AJAX(Asynchronous Javascript And XML)라는 기술을 적용하고 있다.
> - AJAX는 웹 브라우저가 웹 서버로 요청하는 것이 아닌, Javascript로 작성된 프로그램이 웹 서버와 통신한다.
> - 응답 결과로 받은 내용에 대해서는 웹브라우저가 전체 페이지를 다시 그려 화면을 갱신하는 방식이 아닌, 자바스크립트가 웹 페이지의 특정 부분에만 응답 받은 내용이 갱신되도록 처리한다.
> - 사용자의 입장에서는 전체 페이지를 다시 조회하지 않아도 되고, 서버의 응답을 바로 받아 상호작용 할 수 있어 보다 자연스러운 서비스 이용과 향상된 사용자 경험을 느낄 수 있다.
> - 대표적인 사용 예로는 구글 검색의 입력필드는 입력 도중에 검색 키워드와 유사한 키워드 후보드를 표시해주는 것이 있다.

<br>

## 03. 파일을 전송하는 FTP

FTP(File Transfer Protocol)는 파일 전송 프로토콜로 LAN에서는 파일 공유와 같은  
더 간단한 파일 전송 방법이 있기 때문에 주로 인터넷에 연결된 서버에 파일을 전송할 때 사용된다.  
명령어를 사용해서 파일을 업로드하거나 다운로드하고, 디렉토리를 만들거나 파일을 삭제하기도 한다.

FTP는 웹 서버로 웹 페이지를 전송할 때 자주 사용된다.  
한 대의 서버에서 FTP 서버 프로그램과 웹 서버 프로그램을 함께 구동하고 있다면  
FTP로 HTML 파일을 전송하고 이 파일을 웹 서버가 HTTP를 통해 서비스하는 것이 가능하다.

> - 액티브 모드와 패시브 모드  
>    방화벽이나 가정용 초고속 인터넷 router를 사용하는 경우 외부와의 통신을 차단하는 경우가 많다.  
>    특히 FTP서비스에서는 서버 내부에서 외부로 나가는 토신을 방화벽이 차단하여 파일 전송이 안되는 경우가 발생하기도 하는데  
>    이때는 Passive mode를 사용해서 클라이언트 쪽에서 서버 쪽으로 역방향으로 데이터 커넥션을 만들어주면 파일을 전송할 수 있게 된다.  
>   각 모드의 차이점은 단지 누가 접속을 만드느냐에 불과하지만, 이 차이가 보안 수준과 데이터 전송 가능 여부를 좌우하게 된다.

<br>

## 04. 원격지의 컴퓨터 제어하기

Telnet이나 SSH(Secure SHell)는 원격지의 컴퓨터를 명령어로 제어하기 위한 프로토콜이다.  
Telnet이나 SSH는 윈도우의 명령 프롬프트에서 명령을 내리면 그 내용을 그대로 서버로 전달하는데,  
명령에 대한 결과가 다시 텍스트로 표시되어 마치 서버 앞에 앉아 있는 것처럼 작업할 수 있다.

<br>
<br>

# 3. Transport layer

## 01. Transport layer의 역할

트랜스포트 계층의 역할은 수신지의 애플리케이션에 데이터를 전달하는 것이다.  
트랜스포트 계층에서 사용하는 대표적인 프로토콜로는 전송의 신뢰성을 중시하는 TCP와 전송 속도를 중시하는 UDP가 있다.

- 트랜스포트 계층은 애플리케이션에 데이터를 전달한다.
- 포트 번호로 애플리케이션을 구분한다.
- 데이터의 정확한 전달을 중시하는 TCP (정확하게 전달되도록 속도를 조절하거나 도달되지 않은 데이터를 재전송)
- 데이터의 전송 속도를 중시하는 UDP (VolP나 동영상 스트리밍 서비스와 같이 실시간 통신이 필요한 경우 사용)

<br>

## 02. 포트 번호

인터넷 계층에는 외부로부터 다양한 패킷들이 들어오는데, Transport layer의 프로토콜들은  
패킷의 포트 번호를 보고 어느 애플리케이션으로 그 캐핏을 전달해야 하는지 '포트 번호'를 보면 알 수 있다.

포트 번호는 0~65535번 까지 사용할 수 있고, 웰 노운 포트(well-known ports)와 레지스터드 포트(registered ports) 그리고 다이나믹 포트(dynamic ports)의 세 종류로 구분된다.  
이중 웰 노운 포트는 애플리케이션 계층에서 많이 사용되는 대표적인 프로토콜의 수신 포트들이다.

- TCP/UDP의 포트 목록 | https://ko.wikipedia.org/wiki/TCP/UDP%EC%9D%98_%ED%8F%AC%ED%8A%B8_%EB%AA%A9%EB%A1%9D
- 서버 측에서 사용하는 포트는 미리 정해져있다.
- 클라이언트가 사용하는 포트 번호는 다이나믹 포트 번호 대역에서 비어있는 포트 번호를 자동으로 할당하기 때문에 미리 알 수 없다.

> #### 1) 클라이언트와 서버의 접속 과정
>
> 1. 웹 브라우저가 사용할 포트를 할당받고 웹 서버는 80번 포트로 대기하게 된다.
> 2. 이후 연결할 웹 서버의 80번 포트에 접속을 요청하고 서버가 접속을 허용하면 통신이 가능한 상태가 된다.
> 3. 그리고 통신이 종료되면 웹 브라우저는 포트를 반납하게 된다.
>
> #### 2) 포트 번호와 IP Address 조합으로 상대를 식별한다
>
> 서버측의 포트 번호는 고정되어 있기 때문에 여러 클라이언트가 서버와 통신하는 과정에서 같은 포트로 요청이 몰리게 된다.  
> 이때 서버는 클라이언트들의 IP Address와 포트 번호를 조합하여 클라이언트를 식별할 수 있기 때문에 혼선이 발생하지 않게 된다.

<br>

## 03. TCP가 정확하게 데이터를 전달하는 방법

TCP(Transmission Control Protocol)는 트랜스포트 계층의 프로토콜의 하나로서 웹이나 이메일, FTP와 같이 정확한 데이터 전달이 필요한 통신에 사용된다.  
TCP는 데이터 전송에 신뢰성을 더하기 위해 데이터를 세그먼트(segment)라는 단위로 분할하고, 전송 속도를 조정하며 데이터가 제대로 전달되지 않았을 경우 재전송을 하게 된다.

TCP의 세그먼트는 데이터 본체에 TCP header가 붙은 형태로 구성된다. TCP 헤더에는 포트 번호나 일련번호와 같은 정보가 포함되어 있다.

> #### 1) Control Flags 필드(6bit)
>
> TCP헤더 중 컨트롤 비트는 현재의 통신 상태를 표현하는 플래그 역할을 하며,  
> 통신 상대에게 이 정보를 전달해서 TCP 통신을 제어하는 용도로 사용한다.  
> 9개의 플래그 각각은 1비트 크기를 차지하며 ON/OFF 두가지 상태를 표현한다.
>
> - CWR(Congestion Window Reduced) : 통신 경로가 혼잡해서 전송량을 줄여줄 것을 알려준다.
> - ECN(Explicit Congestion Notification) : 통신 경로가 혼잡해서 수신할 수도 없을 수 있다는 것을 알려준다.
> - URG(Urgent) : Urgent Pointer(긴급포인터)에서 지정한 데이터를 즉시 처리해야 한다는 것을 알려준다.
> - ACK(Acknowledgment) : 이전 동작을 확인했다는 것을 알려준다. 확인 응답 번호와 조합해서 사용된다.
> - PSH(Push) : 수신 데이터를 즉시 애플리케이션 계층에 전달해야 한다는 것을 알려준다.
> - RST(Reset) : 이상 상황이 발생하여 접속이 강제 중단되었다는 것을 알려준다.
> - SYN(Synchronize) : 접속을 시작할 때 ON으로 설정한다.
> - FIN(Finish) : 데이터 송신이 완료되어 통신을 종료하고 싶다는 것을 알려준다.
>
> #### 2) 통신 개시부터 통신 종료까지의 흐름
>
> TCP 통신은 '커넥션 연결'에서 시작한다. 커넥션을 맺는 과정은 3단계로 진행되기 때문에 이것을 '3방향 핸드셰이크(3-way handshake)라고 부른다.
>
> - 커넥션 연결(통신 개시) : 통신을 시작하고 싶을 때 SYN을 ON으로 설정하고, 통신을 끝내고 싶을 때 FIN을 ON으로 설정한다.
> - 커넥션 연결 끊기(통신 종료) : ACK는 데이터가 잘 도착했는지 확인 응답을 하기 위한 플래그로 이것이 ON으로 설정된 패킷이 응답으로 돌아오지 않으면 제대로 전달되지 않은 것으로 판단한다.
>
> #### 3) 데이터 전송 과정에서 변화하는 일련번호
>
> 커넥션을 맺는 과정에서 일련번호는 1씩 증가하는데 데이터를 전송할 때는 여기에 전송한 데이터의 바이트 수만큼 더 더해진다.  
> 또 데이터를 수신한 후에는 수신한 데이터의 바이트 수 만큼을 확인 응답 번호에 더하기 때문에  
> 일련번호와 확인 응답 번호를 확인하면 몇 바이트의 데이터를 주고 받았는지 알 수 있다.
>
> - TCP는 일련번호와 응답 확인 번호 정보를 따로 관리하며 데이터가 제대로 송수신되는지 확인한다.
> - ex) 송신 2001 = 1000바이트를 보냈다면 +1000 한다. (송신한 바이트 수 = 일련번호 - 1)
> - ex) 수신 801 = 800바이트를 받았다면 +800 한다. (수신한 바이트 수 = 확인 응답 번호 - 1)
>
> #### 4) 송신 실패 여부를 판단한다
>
> 송신 측에서는 일정 시간이 지난 후에도 수신 측으로부터 응답이 오지 않을 경우  
> 송신 실패로 간주하고 최근에 정상적으로 응답을 받은 후 부터 데이터를 재전송한다.  
> (즉 일정 시간이 지난 후에도 응답이 오지 않으면 데이터를 재전송한다.)
>
> #### 5) 연속된 데이터를 몰아서 보내면 전송 속도가 빨라진다.
>
> 앞서 보낸 데이터에 대한 응답을 받은 후 다음 데이터를 보내는 방식은 다소 많은 시간이 소요된다.
> 대신 응답을 기다리지 않고 연속된 데이터를 몰아 보내면 전송 속도를 향상시킬 수 있다.
>
> #### 6) 한번에 받을 수 있는 데이터 크기를 통보한다.
>
> 하지만 데이터의 양이 너무 많으면 수신 측이 제때 처리하지 못할 수 있다.  
> 그래서 수신 측은 수신한 데이터를 일시적으로 보관 할 수 있는 "버퍼(Buffer)"라는 저장 영역을 가지고 있다.  
> 수신 측은 TCP헤더의 '윈도우 사이즈'에 이 버퍼의 크기를 설정하고 송신 측에 통보함으로서 어느정도의 크기까지 받아 낼 수 있는지를 알려주게 된다.
>
> #### 7) 한번에 받아 낼 수 있는 데이터 양을 조절
>
> 수신 측은 응답을 보낼 때 윈도우 사이즈를 설정하여 현재 어느 정도까지 수신할 수 있는지를 수시로 알려주게된다. 이러한 과정을 흐름제어(flow control)라고 한다.
>
> #### 8) 버퍼가 가득 찬 경우
>
> 버퍼가 가득 차면 윈도우 사이즈가 0으로 설정되고 데이터 전송은 일단 멈추게 된다.  
> 다시 전송을 재개할 시점을 알기 위해서 송신 측은 탐색 패킷 또는 윈도우 프로브(window probe)라고 하는  
> 패킷을 수신측에 보내게 되고, 수신 측의 응답을 받아 현재 윈도우 사이즈를 확인한 후 전송 재개 여부를 결정한다.

<br>

## 04. UDP가 고속으로 데이터를 전달하는 방법

UDP(User Datagram Protocol)는 다른 처리 없이 전송만한다. TCP에 비해 상당히 간단한 프로토콜로서 단순히 데이터를 보내는 역할만 하는데, VolP나 동영상 스트리밍 서비스는 통신 과정에서 데이터의 손실이 발생하더라도 큰 문제가 없기 때문에 UDP를 주로 사용한다.

- UDP에서는 패킷에 해당하는 것을 '데이터그램'이라고 부른다.
- VolP나 동영상 스트리밍 서비스 같이 데이터 전송의 신뢰성보다는 '속도'가 우선일때 사용한다.

- TCP에는 없는 기능으로, 하나의 패킷을 여러 수신지에 전달하는 btoadcast와 Multicast라는 기능이 있다.
- 전송 속도가 우선이더라도 전송의 신뢰성 역시 중요할 때에는 애프릴케이션 계층에서 '흐름 제어'나 '혼잡 제어'를 구현해서 부족한 신뢰성을 보완하게 된다.

## 05. netstat 명령으로 네트워크의 상태 확인하기

- netstat 명령 실행
- FTP의 접속 상태를 확인
- netstat 명령은 간단한 통신 상태만 확인 할 수 있고 더욱 상세하게 살펴보고 싶다면 '패킷 캡처 도구'를 사용하면 된다.

https://mainia.tistory.com/5378
https://docs.oracle.com/cd/E26925_01/html/E25873/ipconfig-142.html

<br>
<br>

# 3. Routing과 Internet layer

## 01. 인터넷 계층의 역할

### 1) IP Address 정보를 보고 데이터를 전달한다.

인터넷 계층의 프로토콜은 수신지 컴퓨터가 아무리 멀리 있더라도 데이터를 전달할 수 있도록 설계되어 있다.  
또 IP address라고 하는 식별자 정보를 실마리로 데이터를 전달할 수 있는 체계를 제공하도록 역할이 각각 구분되어 있다.

- 송신지, 수신지의 컴퓨터는 IP address로 식별하여 해당 컴퓨터를 찾는다.
- router가 데이터를 전달한다.

### 2) Router와 Routing

데이터를 목적지까지 전달하기 위해서는 'Router'라고 하는 네트워크 장비가 필요하다.  
router는 네트워크와 네트워크를 연결하는 역할을 하는데, 하나의 라우터는 데이터를 목적지까지 전달하기 위해  
다음 네트워크의 경로를 찾고 그 경로상에 있는 라우터에게 데이터 전달을 위임하게 된다.  
이러한 과정은 최종 목적지를 찾기까지 연쇄적으로 반복되는데 이러한 과정을 'Routing'이라고 한다.

<br>

## 02. IPv4와 IPv6

### 1) IPv4는 32비트 Address

IPv4(Internet Protocol Version 4)는 현재까지 컴퓨터의 address를 지정할 때 가장 많이 사용되는 인터넷 계층의 프로토콜이다.

- ex) 192.168.100.1 처럼 0~255의 숫자를 4개의 조로 조합해서 표현한다.(8비트씩 4개 단위로 끊은 후 10진수 변환 표기)
- ex) 11000000 10101000 01100100 00000001 처럼 2진수 표기에서는 32비트(00000000~11111111)로 처리된다.

### 2) IP 패킷의 유통기한

IPv4 패킷의 IP header에는 송신지와 수신지의 IP address 외에도 패킷 길이와 같은 다양한 정보들이 포함되어있는데,  
패킷이 목적지를 찾지 못해 네트워크 안을 계속 떠돌게 되면 혼잡해질 수 있기 때문에 이를 방지하기 위하여  
IPv4 header에는 "생존기간(TTL, Time to Live) 정보"를 설정할 수 있게 되어있다.  
만약 생존 기간을 초과한 패킷이 네트워크상에서 발견되면 그 패킷을 소멸시키도록 규정하고 있다.

### 3) IPv6

인터넷의 급격한 성장으로 IPv4의 32비트는 address가 고갈될 상황에 이르렀고 이를 방지하기 위해  
최근 128비트 address로 만든 IPv6 보급이 가속화 되고 있다.  
IPv4와 IPv6는 서로 호환되지 않기 때문에 현재는 두 가지를 병행할 수 있도록 하고 있다.

<br>

## 03. Routing

### 1) Rounting Protocol

데이터가 전송될 경로를 찾기 위해 네트워크 상의 각 라우터는 서로 누구와 연결되어 있는지에 대한 정보를 교환한다.  
이때 라우팅 프로토콜(Rounting Protocol)이 사용되는데, 대표적인 것으로 BGP, OSPE, RIP 등이 있다.

### 2) Autonomous System

인터넷 서비스 제공자가 사용하는 규모가 큰 네트워크에서는 몇 개의 네트워크를 하나로 묶어 "자율 시스템(AS, Autonomous System)이라는 단위로 관리한다. 네트워크 경로 하나하나를 찾아 다니면서 이동하는 대신 AS와 같이 큰 덩어리의 접속 경로 단위로 이동하면 멀리 있는 컴퓨터와도 더 빠른 속도로 통신을 할 수 있다.
